### 实时流计算系统通用架构

- 数据采集
- 编码解码







web服务

* 吞吐量 TPS
* 时延
* 连接方式 （池化 异步）
* 

netty


消息中间件

- 吞吐量
- 时延
- 高可用
- 持久化
- 水平扩展


微服务： 
rpc 





#### 数据处理

* 数据过滤
* 聚合计算
* CEP
* 模型训练

数据转换：
    
    抽取 清洗 转换 加载 

数据流上， 统计各种指标
    
    比如 计数， 求和， 均值，模式匹配

模式匹配
    
    寻找预先设定的事件序列模型


模型学习和预测

    可以实时动态训练



#### 数据存储

    数据量小， 关系型数据库
    数据量大，   nosql数据库
    状态+ 结果   elastic mongo redis

#### 数据展现
    



## 异步高并发

BIO
    一个链接 一个工作线程 

NIO 
    队列 请求连接器和工作线程隔开
    引入选择器来更加精细化管理链接套接字

    CPU和IO分开

IO 和 CPU密集化

网络连接
编码解码

IO   用线程

NIO + 异步



#### 反向压力

Reatctive Streams 




实现反向压力：
1.  容量必须有限
2.  任务队列满了， 告诉上游 阻塞





    
    

